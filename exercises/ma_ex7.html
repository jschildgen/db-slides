<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Datenbanken - Übungsblatt 7</title>
        <link rel="stylesheet" href="../exercises/exercises.css">
        <link href="../lib/fontawesome.all.min.css" rel="stylesheet">
        <link href="../src/erd.css" rel="stylesheet">
        <link rel="stylesheet" href="../lib/joint.min.css" />
    </head>
    <body>
        <header>
            <div>
                <div>
                    <b>Datenbanken - SS 2021</b><br>
                    Prof. Dr.-Ing. Johannes Schildgen<br>
                    johannes.schildgen@oth-regensburg.de<br>
                    <b>Übungsblatt 7 vom 26./27./28.05.2021</b>
                </div>
            <div><img src="../img/oth.png" style="border:0; height:50px"></div>
        </div>
        <hr>
        </header>
<section style="padding-top: 2.5cm">
    <h1>Aufgabe 1: SELECT-Anfragen (10P)</h1>
    <p>Abgabe-Deadline: 26.05.2021 9:00 im Moodle</p>
    <p>Auf dem vorherigen Übungsblatt haben Sie ja bereits auf der Webseite des Datenbankmanagementsystems Hyper SQL-Anfragen gegen das Uni-Schema aus dem Kemper-Datenbanksysteme-Buch gestellt: <a href="http://hyper-db.de/interface.html" target="_blank">http://hyper-db.de/interface.html</a> Nun geht es mit mehr SQL-Anfragen auf diesem Schema weiter.</p>
        <p>Professoren(<u>PersNr</u>, Name, Rang, Raum)<br>
            Studenten(<u>MatrNr</u>, Name, Semester)<br>
            Vorlesungen(<u>VorlNr</u>, Titel, SWS, gelesenVon)<br>
            hoeren(<u>MatrNr, VorlNr</u>)</p>
         <p>Vorlesungen.gelesen_von ist Fremdschlüssel auf Professoren.PersNr<br>
            hoeren.MatrNr ist Fremdschlüssel auf Studenten.MatrNr<br>
            hoeren.VorlNr ist Fremdschlüssel auf Vorlesungen.VorlNr</p>

        <p>Formulieren Sie die folgenden Anfragen mittels SQL. <!--Verwenden Sie bitte nicht das Relax-Tool. Verwenden Sie bei den Fragen 1 bis 4 keine Unteranfragen oder CTEs. -->Richtige Antworten geben 2 bzw. 3 Punkte. Für teilweise richtige Antworten können leider keine Teilpunkte gegeben werden, da ein automatisches Query-Bewertungssystem eingesetzt wird. Achten Sie daher auch darauf, dass keine Tippfehler in Ihren Anfragen sind.</p>

        <table border="0" style="width: 100%">
        <tr><td>1.</td><td>Wie viele Professoren, die den Rang C4 haben, gibt es? (2P)</td></tr>
        <tr><td>2.</td><td>Geben Sie die Namen der Studierenden aus, die die Vorlesung &quot;Grundzüge&quot; hören<!--, und zwar alphabetisch aufsteigend sortiert-->. (2P)</td></tr>
        <tr><td>3.</td><td>Geben zu jedem Professor<!--, der mindestens zwei Vorlesungen hält,--> den Namen sowie die Gesamt-SWS-Zahl der von ihm oder ihr gehaltenen Vorlesungen aus. (3P)</td></tr>
        <tr><td>4.</td><td>Wie sind die Namen der Studierenden, die zusammen mit dem Studenten namens &quot;Feuerbach&quot; zumindest eine gemeinsame Vorlesung hören? Geben Sie keinen Namen doppelt aus. (3P)</td></tr>
        <!--<tr><td>5.</td><td>Welche Professoren haben den Rang C4 und halten keine einzige 4-SWS-Vorlesung.</td></tr>-->
        </table>
    </section>

    <section style="page-break-inside:avoid; padding-top: 2.5cm">
        <h1>Aufgabe 2: SQL-Anfragen auf einer Zugverbindungs-DB</h1>
        <p>Betrachten Sie die folgenden Tabellen BAHNHOEFE und FAHRTEN:</p>
        <div class="columns">
            <div>
                <h3>Bahnhoefe</h3>
                <table>
                    <tr><th><u>BID</u></th><th>Ort</th><th>Bahnhof</th></tr>
                    <tr><td>1</td><td>Regensburg</td><td>Hbf</td></tr>
                    <tr><td>2</td><td>München</td><td>Flughafen</td></tr>
                    <tr><td>3</td><td>München</td><td>Hbf</td></tr>
                </table>
                </div>
                
                <div>
                    <h3>Fahrten</h3>
                    <table>
                        <tr><th><u>ZugNr</u></th><th>Start</th><th>Ziel</th></tr>
                        <tr><td>101</td><td>1</td><td>2</td></tr>
                        <tr><td>102</td><td>1</td><td>3</td></tr>
                        <tr><td>103</td><td>3</td><td>2</td></tr>
                    </table>
                    </div>
        </div>
        <p>Fahrten.Start und Fahrten.Ziel sind jeweils ein Fremdschlüssel auf Bahnhoefe.BID.</p>

        <p>Formulieren Sie SQL-Anfragen für die folgenden Fragestellungen:</p>
        
        <ol>
            <li>Legen Sie die beiden Tabellen Bahnhoefe und Fahrten an, wählen Sie sinnvolle Datentypen, achten Sie auf Primär- und Fremdschlüssel.</li>
            <li>Fügen Sie die oben stehenden Datenzeilen in die Tabellen ein.</li>
            <li>Geben Sie für jeden Ort an, wie viele Bahnhöfe es dort gibt.</li>
            <li>Geben Sie für jeden Ort an, wie viele Zugfahrten in diesem Ort starten.</li>
            <li>Geben Sie für jede Fahrt die Zugnummer, den Start_Ort, Start_Bahnhof, Ziel_Ort und Ziel_Bahnhof aus.</li>
            <li>Wo hin kann man von einem Bahnhof in Regensburg aus fahren? Geben Sie diese Orte aus, jeden aber nur einmal.</li>
        </ol>
    </section>

<script src="../lib/jquery.js"></script>
<script src="../lib/lodash.js"></script>
<script src="../lib/backbone.js"></script>
<script src="../lib/joint.min.js"></script>
<script type="text/javascript">
Reveal = document;
Reveal.registerPlugin = function(pluginname, plugin) {
    plugin.init()
};
Reveal.addEventListener = function(event, f) {
    if(event == 'ready') {
        f();
    }
}
</script>
<script type="text/javascript" src="../src/erd.js"></script>

</body>
</html>